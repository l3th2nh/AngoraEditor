<div id="container" class="easyui-layout" fit="true">
	<div data-options="region:'north'" style="overflow:hidden;">
		<a id="btn" href="#" class="easyui-linkbutton" data-options="iconCls:'icon-add'"></a>
	</div>

	<div id="particles" data-options="region:'center'" style="overflow:hidden;width:350px;height:480px;">
	</div>
	<div data-options="region:'east'" style="overflow:hidden;width:200px;">
		<div id="particleproperty">property</div>
	</div>
</div>
<script>
	$(document).ready(function(){
		var editor=edt;
		var selected=editor.node.selected;
		var emitter;
		var data=[];
		for( key in selected){
			switch(key){
			case 'id':
			case 'type':
			case 'x':
			case 'y':
			case 'visible':type='none';break;
			default:type='numberbox';break;
			}
			data.push({name:key,value:selected[key],group:'default',editor:type});
		}
		$('#particleproperty').propertygrid({
			data: data,
			onEndEdit : function (index, field, changes) {
				var name = field['name'];
				var value = field['value'];
				emitter[name]=parseInt(value);
			}
		});
		var game = new Phaser.Game(300, 400, Phaser.CANVAS, 'particles', { preload: preload, create: create, render: render});

		function preload() {
			game.load.image('particle', 'data/particle.png');
		}
		function create() {
			game.stage.backgroundColor = '#000000';
			emitter = game.add.emitter(game.world.centerX, game.world.centerY, 30);
			emitter = emitter.makeParticles('particle');
			emitter.start(false);
			for(key in selected){
				emitter[key]=selected[key];
			}
		}
		function render() {
			game.debug.text(emitter.total, 32, 32);
		}
	});
</script>